<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="flex flex-col items-center mt-10 gap-4">

  <img
    id="desenho"
    src="/images/feliz.png"
    class="w-64 cursor-pointer select-none"
  />

  <p id="fala" class="text-2xl font-bold text-red-600 text-center"></p>

  <script>
    const img = document.getElementById("desenho");
    const fala = document.getElementById("fala");

    let timeoutId = null;

    img.onclick = async () => {
      // troca pra raiva imediatamente
      img.src = "/images/raiva.png";

      // limpa timeout anterior (caso clique rÃ¡pido)
      if (timeoutId) {
        clearTimeout(timeoutId);
        timeoutId = null;
      }

      try {
        const res = await fetch("http://localhost:8000/reclamar?evento=click");
        const data = await res.json();
        fala.innerText = data.texto;
      } catch {
        fala.innerText = "Erro ao reclamar ðŸ˜¡";
      }

      // volta pra feliz e esconde a mensagem apÃ³s 3 segundos
      timeoutId = setTimeout(() => {
        img.src = "/images/feliz.png";
        fala.innerText = "";
        timeoutId = null;
      }, 3000);
    };
  </script>

</body>
</html>
